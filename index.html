<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> </script>
<script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"> </script>
<script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.js"></script>
<style>
* {
  box-sizing: border-box;
}

body {
  background-color: #2c333a !important;
  color: #eee;
  padding-top: 10rem;
}
#myInput {
  background-color: #323C46;
  background-image: url('https://icon-library.com/images/svg-search-icon/svg-search-icon-9.jpg');
  background-size: 1%;
  background-position: 10px 12px;
  background-repeat: no-repeat;
  width: 100%;
  font-size: 16px;
  padding: 12px 20px 12px 40px;
  border: 1px solid #ddd;
  margin-bottom: 12px;
  
  color: #eee;
  
  position: fixed;
  top: 0;
}

#myUL {
  list-style-type: none;
  padding: 0;
  margin: 0;
  display: none;
  
}
#element4 {
  background-color: #323C46;
  height: 100%;
  padding: 0;
}
#preview {
  height: 100%;
  border: 1rem #323C46;
  border-radius: 50%;
  display:inline-block;
}

#element4:hover {
  background-color: #384553;;
}

  #element4:hover #preview {
    position: fixed;
    height: 50%;
    width: auto;
    left: 50%;
    top : 10%;
    }


#myUL li {
  border-radius: 8px;
  /* margin-top: -1px; 
  margin-bottom: 1px; */
  background-color: #323C46;
  text-decoration: none;
  font-size: 18px;
  color: black;
  display: block;
  height: 7rem;
  margin-bottom: 0.3rem;
}

#container {
  height: 100%;
  padding-top: 0.2rem;
  padding-left: 0.3rem;
  padding-bottom: 0.2rem;
}
#topnav{
  background-color:#323C46;
}
#text {
  padding: 0;
  margin: 0;
  margin-bottom: 1rem;
  padding-left: 2rem;
  display:inline-block;
  color: #eee;
  overflow: hidden;
  /* height: 100%; */
  top: 0rem;
}

#text h1 p {
  margin: 0;
  padding: 0;
  margin-bottom: 1rem;
  padding-left: 2rem;
  top: 0rem;
}

#myUL li a:hover:not(.header) {
  background-color: #384553;
}

.scroll {
    color: #fff;
    margin-top: 100px
}

#toTopBtn {
    position: fixed;
    bottom: 26px;
    right: 39px;
    z-index: 98;
    padding: 21px;
    background-color: rgba(75, 75, 92, 0.8)
}

.js .cd-top--fade-out {
    opacity: .5
}

.js .cd-top--is-visible {
    visibility: visible;
    opacity: 1
}

.js .cd-top {
    visibility: hidden;
    opacity: 0;
    transition: opacity .3s, visibility .3s, background-color .3s
}

.cd-top {
    position: fixed;
    bottom: 20px;
    bottom: var(--cd-back-to-top-margin);
    right: 20px;
    right: var(--cd-back-to-top-margin);
    display: inline-block;
    height: 40px;
    height: var(--cd-back-to-top-size);
    width: 40px;
    width: var(--cd-back-to-top-size);
    box-shadow: 0 0 10px rgba(0, 0, 0, .05) !important;
    background: url(https://res.cloudinary.com/dxfq3iotg/image/upload/v1571057658/cd-top-arrow.svg) no-repeat center 50%;
    background-color: rgba(80, 81, 92, 0.8);
    background-color: hsla(var(--cd-color-3-h), var(--cd-color-3-s), var(--cd-color-3-l), 0.8)
}

.center {
    height: 70vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #2c333a;
    
  }
  .wave {
    width: 5px;
    height: 100px;
    background: linear-gradient(45deg, #ffffff, #ffffff);
    margin: 10px;
    animation: wave 1s linear infinite;
    border-radius: 20px;
  }
  .wave:nth-child(2) {
    animation-delay: 0.1s;
  }
  .wave:nth-child(3) {
    animation-delay: 0.2s;
  }
  .wave:nth-child(4) {
    animation-delay: 0.3s;
  }
  .wave:nth-child(5) {
    animation-delay: 0.4s;
  }
  .wave:nth-child(6) {
    animation-delay: 0.5s;
  }
  .wave:nth-child(7) {
    animation-delay: 0.6s;
  }
  .wave:nth-child(8) {
    animation-delay: 0.7s;
  }
  .wave:nth-child(9) {
    animation-delay: 0.8s;
  }
  .wave:nth-child(10) {
    animation-delay: 0.9s;
  }
  
  @keyframes wave {
    0% {
      transform: scale(0);
    }
    50% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
/* } */

.list-group {
    width: 400px !important
}

.list-group-item {
    margin-top: 10px;
    border-radius: none;
    background-color: #323C46 !important;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
}

.list-group-item:hover {
    transform: scaleX(1.1)
}

/* .list-group-item:hover img {
    position: fixed;
    height: 50%;
    width: auto;
    left: 50%;
    top : 10%;
} */

.check {
    opacity: 0;
    transition: all 0.6s ease-in-out
}

.list-group-item:hover .check {
    opacity: 1
}

.about span {
    font-size: 12px;
    margin-right: 10px
}

#navbar {
 background-color: #2c333a !important;
}


#userImg {
  border-radius: 50%;
}

#userImgBig {
    opacity: 0%;
    border-radius: 50%;
    position: fixed;
    height: 50%;
    width: auto;
    left: 50%;
    top : 30%;
}


.list-group-item:hover #userImgBig {
  opacity: 100%;
}


.about {
  margin-left: 1rem;
}

/* 
@media screen and (max-width: 800px) {
} */


</style>
</head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<link type="text/html" rel="stylesheet" href="node_modules/mdbootstrap/css/mdb.min.css">
<body>


<nav id="navbar" class="navbar navbar-light bg-light justify-content-center text-center fixed-top">
  <div class="form-center w-100">
    <h1 class="display-3 text-center text-white font-weight-bold">Students</h1>
    <div class="input-group">
      <input type="text" id="searchInput" onkeyup="myFunction()" class="form-control" placeholder="Search" aria-label="Search" aria-describedby="basic-addon1">
    </div>
  </div>
</nav>

<a href="#" id="toTopBtn" class="cd-top text-replace js-cd-top cd-top--is-visible cd-top--fade-out" data-abc="true"></a>

<div class="center" id="spinner">
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
  <div class="wave"></div>
</div>

<div class="container d-flex justify-content-center">
  <ul id="list" class="list-group mt-5 text-white nav-fill w-100">
  </ul>
</div>

<script>
var data
$(function() {


var people = [];

var code = prompt("Code: ");

const Http = new XMLHttpRequest();
const url='https://flyyrin.pythonanywhere.com/'+code;
console.log(code)
Http.open("GET", url);
Http.send();

Http.onreadystatechange = (e) => {
  if (data == null) {
    data = Http.responseText
    console.log("Loaded request")
    var data = $.parseJSON(data)
    console.log(data)
    $.each(data, function(i, f) {
      // console.log(i)
          var ul = document.getElementById("list");

          var li = document.createElement("li");
          var imgbig = document.createElement("img");
          var div1 = document.createElement("div");
          var img = document.createElement("img");
          var div2 = document.createElement("div"); 
          var h6 = document.createElement("h6"); 
          var div3 = document.createElement("div"); 
          var span1 = document.createElement("span"); 
          var span2 = document.createElement("span"); 

          li.setAttribute("class", "list-group-item d-flex justify-content-between align-content-center w-100");
          imgbig.setAttribute("src", f.imageUrl); 
          imgbig.setAttribute("id", "userImgBig");
          imgbig.setAttribute("class", "lazyload");
          imgbig.setAttribute("data-src", "spinner.gif");
          div1.setAttribute("class", "d-flex flex-row");
          img.setAttribute("src", f.imageUrl);
          img.setAttribute("width", "40");
          img.setAttribute("id", "userImg");
          img.setAttribute("class", "lazyload");
          img.setAttribute("data-src", "spinner.gif");
          div2.setAttribute("class", "ml-2");
          h6.setAttribute("class", "mb-0");
          h6.innerText = f.firtName + " " + f.lastName
          div2.setAttribute("class", "about");
          span1.innerText = f.school
          span2.innerText = f.klas

          ul.append(li);
          li.append(imgbig);
          li.append(div1);
          div1.append(img);
          div1.append(div2);
          div2.append(h6);
          div2.append(div3);
          div3.append(span1);
          div3.append(span2);


          // h1.innerText = f.firtName + " " + f.lastName
          // p.innerText = f.school + ": " + f.klas
          // div1.setAttribute("id", "container");
          // div2.setAttribute("id", "text");
          // img.setAttribute("src", f.imageUrl);
          // img.setAttribute("id", "preview");
          // img.setAttribute("loading", ";lazy");
          // li.setAttribute("id", "element4");
          // li.appendChild(div1);
          // div1.appendChild(img);
          // div1.appendChild(div2);
          // div2.appendChild(h1);
          // div2.appendChild(p);
          // ul.appendChild(li);
          });
    // loadImg();
    removeSpinner();
    
  }
}

      // li   <li class="list-group-item d-flex justify-content-between align-content-center w-100">
      // div1     <div class="d-flex flex-row"> 
      // img       <img src="https://img.icons8.com/color/100/000000/folder-invoices.png" width="40" />
      // div2      <div class="ml-2">
      // h6        <h6 class="mb-0">Ogivet Maither</h6>
      // div3         <div class="about"> 
      // span1             <span>22 Files</span> 
      // span2            <span>Jan 21, 2020</span> 

      //              </div>
      //         </div>
      //     </div>
      // </li>

      // <li class="list-group-item d-flex justify-content-between align-content-center w-100">
      //   <div class="d-flex flex-row">
      //       <img src="https://userpicture10.smartschool.be/User/Userimage/hashimage/hash/3627_dba1f7fc-8163-4414-9907-f3df5c372f25/plain/1/square/1/res/256" width="40" loading=";lazy">
      //       <div class="about">
      //         <h6 class="mb-0">Aaron van Deuren</h6>
      //         <div><span>WT6HB1A</span><span></span></div>
      //       </div>
      //   </div>
      // </li>


});

function myFunction() {
  spinnerActivated();
    var input, filter, ul, li, a, i, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toUpperCase();
    ul = document.getElementById("list");
    li = ul.getElementsByTagName("li");
    for (i = 0; i < li.length; i++) {
        a = li[i];
        txtValue = a.textContent || a.innerText;
        console.log(txtValue)
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.setProperty("display", "", "important")
        } else {
            li[i].style.setProperty("display", "none", "important")
        }
    }
    removeSpinner();
}



$(document).ready(function() {
$(window).scroll(function() {
if ($(this).scrollTop() > 20) {
$('#toTopBtn').fadeIn();
} else {
$('#toTopBtn').fadeOut();
}
});

$('#toTopBtn').click(function() {
$("html, body").animate({
scrollTop: 0
}, 1000);
return false;
});
});

// function loadImg() {
//   var counter = 0;
//   var size = $('img').length;

//   $("img").load(function() { // many or just one image(w) inside body or any other container
//       counter += 1;
//       counter === size && removeSpinner();
//   }).each(function() {
//     this.complete && $(this).load();        
//   });
// }

function removeSpinner() {
  console.log("Loaded list");
  document.getElementById("spinner").style.display = "none";
  // document.getElementById("list").style.display = "block";
}
function spinnerActivated() {
  console.log("Loaded activated");
  document.getElementById("spinner").style.display = "block";
  // document.getElementById("list").style.display = "block";
}


</script>

</body>
</html>
